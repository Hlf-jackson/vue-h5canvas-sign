{"remainingRequest":"/Users/mac/Desktop/未命名文件夹/vue-h5canvas-sign/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/Desktop/未命名文件夹/vue-h5canvas-sign/src/views/Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mac/Desktop/未命名文件夹/vue-h5canvas-sign/src/views/Home.vue","mtime":1677315824289},{"path":"/Users/mac/Desktop/未命名文件夹/vue-h5canvas-sign/node_modules/cache-loader/dist/cjs.js","mtime":1665459455731},{"path":"/Users/mac/Desktop/未命名文件夹/vue-h5canvas-sign/node_modules/babel-loader/lib/index.js","mtime":1677319763836},{"path":"/Users/mac/Desktop/未命名文件夹/vue-h5canvas-sign/node_modules/cache-loader/dist/cjs.js","mtime":1665459455731},{"path":"/Users/mac/Desktop/未命名文件夹/vue-h5canvas-sign/node_modules/vue-loader/lib/index.js","mtime":1677319766737}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBTaWduYXR1cmVQYWQgZnJvbSAic2lnbmF0dXJlX3BhZCI7CmltcG9ydCB7IHJvdGF0ZUJhc2U2NEltZyB9IGZyb20gIkAvdXRpbHMvY29tbW9uIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiU2lnbk5hbWVDYW52YXMiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjYW52YXNOb2RlOiBudWxsLAogICAgICBwcmV2aWV3SW1hZ2U6IG51bGwsCiAgICB9OwogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuaW5pdGFsSGFuZGxlKCk7CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigicmVzaXplIiwgdGhpcy5pbml0YWxIYW5kbGUsIGZhbHNlKTsKICB9LAogIGJlZm9yZURlc3Ryb3koKSB7CiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigicmVzaXplIiwgdGhpcy5pbml0YWxIYW5kbGUsIGZhbHNlKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGluaXRhbEhhbmRsZSgpIHsKICAgICAgY29uc3QgX2NhbnZhc0JveCA9IHRoaXMuJHJlZnMuY2FudmFzUmVmOwogICAgICBjb25zdCBfY2FudmFzID0gdGhpcy4kcmVmcy5jYW52YXNNYXBSZWY7CiAgICAgIGlmICghX2NhbnZhc0JveCB8fCAhX2NhbnZhcykgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgX2NhbnZhcy53aWR0aCA9IF9jYW52YXNCb3guY2xpZW50V2lkdGg7CiAgICAgIF9jYW52YXMuaGVpZ2h0ID0gX2NhbnZhc0JveC5jbGllbnRIZWlnaHQ7CgogICAgICB0aGlzLmdvQ2xlYXIoKTsKICAgICAgdGhpcy5jYW52YXNOb2RlID0gbmV3IFNpZ25hdHVyZVBhZChfY2FudmFzLCB7CiAgICAgICAgbWluV2lkdGg6IDIsCiAgICAgICAgbWF4V2lkdGg6IDIsCiAgICAgICAgcGVuQ29sb3I6ICJyZ2IoMCwgMCwgMCkiLAogICAgICB9KTsKICAgIH0sCgogICAgZ29DbGVhcigpIHsKICAgICAgaWYgKHRoaXMuY2FudmFzTm9kZSkgewogICAgICAgIHRoaXMuY2FudmFzTm9kZS5jbGVhcigpOwogICAgICAgIHRoaXMucHJldmlld0ltYWdlID0gbnVsbDsKICAgICAgfQogICAgfSwKCiAgICBnb1N1cmUoKSB7CiAgICAgIGNvbnN0IGNhbnZhc05vZGUgPSB0aGlzLmNhbnZhc05vZGU7CiAgICAgIC8vIOmHjeaWsOWIneWni+WMlueUu+W4gwogICAgICBpZiAoIWNhbnZhc05vZGUpIHsKICAgICAgICB0aGlzLmluaXRhbEhhbmRsZSgpOwogICAgICB9CgogICAgICAvLyDmmK/lkKbnrb7lrZcKICAgICAgaWYgKGNhbnZhc05vZGUuaXNFbXB0eSgpKSB7CiAgICAgICAgdGhpcy4kdG9hc3QoIuaCqOi/mOayoeacieetvuWQjSIpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgLy8g5Zu+5YOP5peL6L2s5LqM5qyh5aSE55CGCiAgICAgIGNvbnN0IF9ib3hXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoOwogICAgICBjb25zdCBfYm94SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0OwogICAgICBjb25zdCBfc2lnbkltZyA9IGNhbnZhc05vZGUudG9EYXRhVVJMKCJpbWFnZS9wbmciLCAwLjYpOwogICAgICBpZiAoX2JveFdpZHRoIDwgX2JveEhlaWdodCkgewogICAgICAgIHRoaXMucHJldmlld0ltYWdlID0gX3NpZ25JbWc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcm90YXRlQmFzZTY0SW1nKF9zaWduSW1nLCAtOTAsIChpbWdVcmxSZXMpID0+IHsKICAgICAgICAgIHRoaXMucHJldmlld0ltYWdlID0gaW1nVXJsUmVzOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"canvas-wrap\">\n    <div v-show=\"!previewImage\" ref=\"canvasRef\" class=\"canvas-wrap-box\">\n      <canvas\n        id=\"canvas-map\"\n        ref=\"canvasMapRef\"\n        width=\"100\"\n        height=\"100\"\n      ></canvas>\n    </div>\n    <div class=\"preview-wrap\" v-show=\"previewImage\">\n      <img class=\"preview-image\" :src=\"previewImage\" alt=\"生成预览\" />\n    </div>\n    <div class=\"btn-box\">\n      <span class=\"clear-btn\" @click=\"goClear\">清除</span>\n      <span class=\"sure-btn\" @click=\"goSure\">确认</span>\n    </div>\n  </div>\n</template>\n\n<script>\nimport SignaturePad from \"signature_pad\";\nimport { rotateBase64Img } from \"@/utils/common\";\n\nexport default {\n  name: \"SignNameCanvas\",\n  data() {\n    return {\n      canvasNode: null,\n      previewImage: null,\n    };\n  },\n  mounted() {\n    this.initalHandle();\n    window.addEventListener(\"resize\", this.initalHandle, false);\n  },\n  beforeDestroy() {\n    window.removeEventListener(\"resize\", this.initalHandle, false);\n  },\n  methods: {\n    initalHandle() {\n      const _canvasBox = this.$refs.canvasRef;\n      const _canvas = this.$refs.canvasMapRef;\n      if (!_canvasBox || !_canvas) {\n        return false;\n      }\n\n      _canvas.width = _canvasBox.clientWidth;\n      _canvas.height = _canvasBox.clientHeight;\n\n      this.goClear();\n      this.canvasNode = new SignaturePad(_canvas, {\n        minWidth: 2,\n        maxWidth: 2,\n        penColor: \"rgb(0, 0, 0)\",\n      });\n    },\n\n    goClear() {\n      if (this.canvasNode) {\n        this.canvasNode.clear();\n        this.previewImage = null;\n      }\n    },\n\n    goSure() {\n      const canvasNode = this.canvasNode;\n      // 重新初始化画布\n      if (!canvasNode) {\n        this.initalHandle();\n      }\n\n      // 是否签字\n      if (canvasNode.isEmpty()) {\n        this.$toast(\"您还没有签名\");\n        return false;\n      }\n\n      // 图像旋转二次处理\n      const _boxWidth = window.innerWidth;\n      const _boxHeight = window.innerHeight;\n      const _signImg = canvasNode.toDataURL(\"image/png\", 0.6);\n      if (_boxWidth < _boxHeight) {\n        this.previewImage = _signImg;\n      } else {\n        rotateBase64Img(_signImg, -90, (imgUrlRes) => {\n          this.previewImage = imgUrlRes;\n        });\n      }\n    },\n  },\n};\n</script>\n\n<style lang='css' scoped>\n\n.canvas-wrap .btn-box .clear-btn,\n.canvas-wrap .btn-box .sure-btn {\n  display: inline-block;\n  width: 100px;\n  height: 24px;\n  margin: 0 10px;\n  line-height: 24px;\n  border-radius: 6px;\n  background-color: #fff;\n}\n\n.canvas-wrap .btn-box .clear-btn {\n  color: #898989;\n\tbackground: #d4d4d4;\n}\n\n.canvas-wrap .btn-box .sure-btn {\n  color: #fff;\n  background: linear-gradient(100deg, #ff4e01 0%, #ffbc01 100%);\n}\n\n.canvas-wrap .canvas-wrap-box {\n  /* left: 22%; */\n  box-sizing: border-box;\n  width: 20vw;\n  height: 80vh;\n  border: 1px dashed #d4d4d4;\n  overflow: hidden;\n  background-color: #fff;\n}\n\n/* 竖屏 css */\n@media screen and (orientation: portrait) {\n  .canvas-wrap .canvas-wrap-box {\n    width: 90%;\n    height: 30vh;\n    margin: 20px auto 0;\n  }\n  .preview-wrap {\n    margin: 20px auto 0;\n  }\n  .canvas-wrap .btn-box {\n    margin-top: 16px;\n  }\n}\n\n/* 横屏 css */\n\n@media screen and (orientation: landscape) {\n  /* 横屏样式自己调试 */\n}\n</style>\n"]}]}